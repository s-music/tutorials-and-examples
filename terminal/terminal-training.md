# Terminal研修

## CUI(CommandLine User Interface)について

普段PCを操作するときにはマウスポインタ、Finder、各種アプリケーションなど  
GUI(Graphical User Interface)と呼ばれる操作体系を用いた操作がほとんどだと思います。  

しかし、PCの黎明期にはマウスなどの装置はなく、PCへの主要な命令は全てキーボードから行っていました。  
キーボード入力のみでPCを操作する操作体系をCUI(CommandLine User Interface)と呼びます。  

現代のPCでもCUIでの操作体系が残っており、プログラミングなどの分野で使われています。  

## CUIでPCを操作してみる

CUIでPCを操作するには、Macの場合はTerminalというアプリケーションを利用します。  
これはMacPCにデフォルトで入っているアプリケーションのひとつです。  

Launchpad > その他 > ターミナル  

でターミナルを開いてみましょう。  
このような画面が表示されるはずです。  

![Terminalの初期画面](./images/image1-1.png "Terminalの初期画面")

この画面に色々なコマンドを入力することでPCに様々な命令を行うことができます。  

## lsコマンド

Terminalを開いた時点ではFinderでHomeを表示している状態と同じ状態です。  
この状態で

```
$ ls
```

と入力してみましょう。  
Homeの中にあるファイルやフォルダの名前が表示されたと思います。  
*lsコマンド*は現在開いているフォルダ(ディレクトリ)の内容を表示するコマンドです。  

コマンドの後に'-(ハイフン)'の後にコマンドごとに決まっている特定の文字を続けると、  
*オプション*と言って、デフォルトの機能を拡張した動作を行わせることができます。  

lsコマンドでよく用いるオプションには以下のようなものがあります。  

```
$ ls -l // 通常のファイルやディレクトリの詳細も一緒に表示
$ ls -a // '.(ピリオド)'から始まる隠しファイルや隠しディレクトリも表示
$ ls -la // 隠しファイルや隠しディレクトリの詳細も一緒に表示
```

## touchコマンド

Termnalで新たにファイルを作成するためには*touchコマンド*が使えます。  

```
$ touch <ファイル名>
```

lsコマンド・Finderで確認してみるとファイルが作成されていることがわかると思います。  

## mkdirコマンド

ファイルが作成できたので、次はフォルダ(ディレクトリ)を作成してみたいと思います。  
フォルダを作成するためには*mkdirコマンド*を用います。  

```
$ mkdir <フォルダ名>
```


## lessコマンド

今度はファイルを開いてみましょう。*lessコマンド*が使えます。  

```
$ less <ファイル名>
```

これでファイルの内容を表示できましたが、画面の様子が違うと思います。  
lessコマンドでファイルを開いた場合は通常のterminal操作とは別の操作方法となり、  
基本的な操作は以下の表のようになります。  

|  キー | 動作 |
|  ------ | ------ |
|  スペース or f | 1ページ分下にスクロール |
|  b | 1ページ分上にスクロール |
|  g | ファイルの先頭に移動 |
|  Shift + g | ファイルの最後に移動 |
|  q | 終了 |
|  /(pattern) | 下方検索 |
|  ?(pattern) | 上方検索 |
|  n | 検索結果の次のマッチへ |
|  N | 検索結果の前のマッチへ |

qで終了することができます。  
こうした操作は慣れが必要です。使いながら体で覚えましょう。  

lessコマンドには以下のようなオプションが用意されています。  

```
$ less -N <filename> // 行番号を表示
```

## cdコマンド

作ったディレクトリに移動してみましょう。他のディレクトリに移動するには*cdコマンド*を使います。 

```
$ cd <ディレクトリ名>
```

※何も指定しなければ、homeに移動します。  

### パス(PATH)

ここでパス(PATH)について説明したいと思います。  
パス(PATH)とはファイルの場所を示すものです。  

パスには*絶対パス*と*相対パス*という指定方法が存在します。  
絶対パスとはそのファイルやディレクトリ自体の場所をそのまま指定する方法で、  
相対パスとはあるディレクトリからみた位置によって指定を省略する方法です。  

```
$ cd /Users/stone/Documents // 絶対パス
$ cd ./Doucment // 相対パス(homeにいた場合)
```

ここで、相対パス指定の'.(ピリオド)'はカレントディレクトリ(現在いるディレクトリ)をさしています。  
以下に相対パス指定の省略記法を示します。  

|  記号 | 指し示しているもの |
|  ------ | ------ |
|  / | ルートディレクトリ(PC全体のファイルが格納されている大元のディレクトリ) |
|  . | カレントディレクトリ(現在いるディレクトリ) |
|  .. | 親ディレクトリ(現在いるディレクトリの１つ前のディレクトリ) |
|  ~ | home |

相対パスは入力を省略できますが、今いるディレクトリによって示す場所が異なるため注意が必要です。  


## pwdコマンド

今いるディレクトリ(カレントディレクトリ)のパスを確認するには*pwdコマンド*が使えます。  

```
$ pwd
```

## mvコマンド

ファイルやディレクトリのパスを変更(移動やrename)するには*mvコマンド*を使います。  

```
$ mv <変更したいファイルもしくはディレクトリのパス> <変更後のファイルもしくはディレクトリのパス>
$ mv sample.txt ./sample/ // sample.txtをsampleディレクトリに移動
$ mv sample.txt sample-2.txt // 名前変更
```

## cpコマンド

ファイルやディレクトリをコピーするには*cpコマンド*を使います。  

```
$ cp <コピーしたいファイル> <コピーするファイル>
$ cp <コピーしたいファイル> <コピーしたファイルを格納したいディレクトリ>
```

-rオプションを使うことで、ディレクトリの内容をそっくりコピーすることも可能です。  

```
$ cp -r <コピーしたいディレクトリ> <コピーするディレクトリ>
```

## rmコマンド

ファイルやディレクトリを削除するにはrmコマンドを使用します。  


```
$ rm <コピーしたいファイル>
```

-rオプションを使うことで、ディレクトリを削除することも可能です。  

```
$ rm -r <コピーしたいディレクトリ> <コピーするディレクトリ>
```

## findコマンド

ファイルやディレクトリの検索を行う場合はfindコマンドが使えます。  

```
$ find <検索をかけたいディレクトリ> -name <検索したいファイル>
```

## grepコマンド

ファイルやディレクトリから特定の文字列を検索したい場合はgrepコマンドが使えます。  

```
$ grep <検索したい文字列> <対象のファイル>
```

実行すると一致した行があった場合それを出力します。  
オプションをつけることで特定の文字列を持つファイルを表示したり、特定の単語を検索することができます。  

```
$ grep -r <検索したい文字列> <検索したいディレクトリ> // 指定した文字列を含むファイルとそれを表示
$ grep -w <検索したい単語> <検索したいファイル> // 指定した単語を含む場合それを表示
```

## その他機能

- 十字キーの上下で、コマンドの入力を遡ることができます。
- control + Cで現在実行中のコマンドを停止できます。  

### 補足) パイプライン処理

コマンドの出力結果を別のコマンドへ渡し、出力データを加工していくことを*パイプライン処理*と呼びます。  
パイプライン処理は「|(バーティカルバー, パイプ)」と「>(大なり, リダイレクト)」を用いて組み立てます。  

- | → あるコマンドの出力結果を別のコマンドの入力に引き渡す
- \> → あるコマンドの出力結果をファイルに出力する

```
// パイプラインの例
/**
 * ルートディレクトリから"hogehoge"という文字列を持つファイルを検索し、
 * less -Nコマンドで行数付きの表示する。
 */
grep -r "hogehoge" / | less -N
```

### 補足) シェルスクリプト

あらかじめ実行するコマンド群をファイルとして残しておき、繰り返し利用できるようにしたものを  
*シェルスクリプト*と呼びます。  

シェルスクリプトは".sh"という拡張子を持つファイルに記述します。  

```sh
#!/bin/sh → 保存場所を記入

# コメント
# sample.sh
# シェルスクリプトの例: "Hello, World!!"を出力するスクリプト

# echoコマンドは標準出力に指定された文字列を出力するコマンド
echo "Hello, World!"
```

ファイルと同じ階層でTerminalから

```
$ sh sample.sh
// もしくは
$ ./sample.sh
```

で実行

## 課題)homebrew, vim, gitをインストールする

homebrew, vim, gitのインストール方法について調べ、インストールしておく。  
