# Section-5. コレクション

*コレクション*とは複数のインスタンスを管理するためのクラスやインタフェースの総称です。  

## 5.1 ArrayList

コンピュータのデータの配置・記憶方法(データ構造)として、  
*配列*と*リスト*があります。  
両者の特徴は以下の通りです。  

#### ・配列  
・同じ種類の値をメモリ上の連続した場所に順番に保存する。  
・先頭のアドレスに対して名前がつけられ、添え字を使って番号を表す。  
・先頭アドレスにつけられた名前 + 添え字でアドレスを特定できるため、直接データにアクセスできる。  

#### ・リスト
・各データに次のデータ(双方向の場合は前のデータも)のアドレス(ポインタ)を付与し、連続もしくは非連続的に保存する。  
・前のデータのポインタのみを持つものを*単方向リスト*、前後のポインタを持つものを*双方向リスト*と呼ぶ。  
・先頭のアドレスに対して名前がつけられ、あるデータにアクセスする場合はリストのデータを順に辿っていく。  

Javaでは、これらのデータ構造を

・配列 → 配列(言語仕様, 配列を扱う便利なメソッドがjava.util.Arraysクラスに用意されている)  
・単方向リスト → ArrayList<E>クラス  
・双方向リスト → LinkedList<E>クラス  

でそれぞれ表現しています。  

配列とリストの実用面での違いは以下の通りです。

・配列は固定長、リストは可変長(随時追加・削除が可能)  
・配列は添え字を使ってメモリアドレスを直接指定するのに対し、リストはデータをたどる必要があるため、データへのアクセスは後者の方が遅くなる  
など  

それでは実際にArrayListを使ってみましょう。  
Main.javaを作成し、以下を記述してください。  

```java
// Main.java
import java.util.*; // リストを使うにはjava.utilパッケージをimportする

public class Main() {

  public static void main (String args[]) {
    // リストのインスタンスを生成
    ArrayList<String> members = new ArrayList<String>();
    // ArrayListクラスのaddメソッドを使って要素を追加
    members.add("Tom");
    members.add("Alice");
    members.add("Bob");
    // ArrayListクラスのsizeメソッドを使って要素数を取得
    System.out.println(members.size());
    // ArrayListクラスのgetメソッドを使って要素を取得
    System.out.println(members.get(0));

    // 拡張forループ
    // 全ての要素を表示
    for (String name: members) {
        System.out.println(name);
    }
  }

}

```

まず、  

`ArrayList<String> members = new ArrayList<String>();`

の部分でString型のリストのインスタンスを作成しています。  

各要素への処理はArrayListクラスで定義されており、基本的なものとして、  
・addメソッド → 要素の追加  
・sizeメソッド → 要素数の取得  
・getメソッド → 要素の取得  
などがあります。  

コレクションには*拡張forループ*と呼ばれる構文が用意されており、  
コレクションの全ての要素を取り出し、その要素を使って処理を行うことができます。  

この例ではmembersの要素を１つずつ取り出し、順次表示しています。  


### 補足) ジェネリクス

ArrayListのインスタンスを生成する際に見慣れない構文が出てきました。  

`ArrayList<String>`

この<String>の部分を*型パラメータ(型引数)*と呼びます。  
型パラメータとは文字通り型を引数としてとり、ArrayListクラスの定義元の*型変数*に代入しています。  

実際にArrayListの定義元を参照してみましょう。  

`public class ArrayList<E>`

このような記述が見つかることと思います。  

このEの部分が型変数であり、型パラメータで指定された型がEに代入されます。  
Eに具体的な型が代入されることにより、生成されたArrayListインスタンスがどの型のリストであるかが決まります。  

また、ここでは触れませんが、  
ある特定のクラスを継承した型のみ型パラメータに取れるようにするなど、  
*型制約*をつけることもできます。  

このように型パラメータを使って型の宣言ができる機能のことを  
*ジェネリクス*と呼びます。  

## 練習問題

[Section-5. コレクションの練習問題](./section-5-exercise.md)  
